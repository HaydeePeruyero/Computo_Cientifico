<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sección 2 Shell | Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos</title>
<meta name="author" content="Haydeé Peruyero">
<meta name="description" content="Descargar git bash para Windows o seguir las instrucciones de Software carpentries para otros sistemas operativos. Basado en la lección de The carpentries  2.1 Navegar en archivos y directorios...">
<meta name="generator" content="bookdown 0.37 with bs4_book()">
<meta property="og:title" content="Sección 2 Shell | Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos">
<meta property="og:type" content="book">
<meta property="og:description" content="Descargar git bash para Windows o seguir las instrucciones de Software carpentries para otros sistemas operativos. Basado en la lección de The carpentries  2.1 Navegar en archivos y directorios...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sección 2 Shell | Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos">
<meta name="twitter:description" content="Descargar git bash para Windows o seguir las instrucciones de Software carpentries para otros sistemas operativos. Basado en la lección de The carpentries  2.1 Navegar en archivos y directorios...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.6.1/transition.js"></script><script src="libs/bs3compat-0.6.1/tabs.js"></script><script src="libs/bs3compat-0.6.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos</a></li>
<li><a class="active" href="shell.html"><span class="header-section-number">2</span> Shell</a></li>
<li><a class="" href="git-y-github.html"><span class="header-section-number">3</span> Git y Github</a></li>
<li><a class="" href="python.html"><span class="header-section-number">4</span> Python</a></li>
<li><a class="" href="sql.html"><span class="header-section-number">5</span> SQL</a></li>
<li><a class="" href="power-bi.html"><span class="header-section-number">6</span> Power BI</a></li>
<li><a class="" href="r.html"><span class="header-section-number">7</span> R</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="shell" class="section level1" number="2">
<h1>
<span class="header-section-number">Sección 2</span> Shell<a class="anchor" aria-label="anchor" href="#shell"><i class="fas fa-link"></i></a>
</h1>
<p>Descargar <a href="https://gitforwindows.org/">git bash</a> para Windows o seguir las instrucciones de <a href="https://carpentries.github.io/workshop-template/install_instructions/#shell">Software carpentries</a> para otros sistemas operativos.
Basado en la lección de <a href="https://swcarpentry.github.io/shell-novice/">The carpentries</a></p>
<div id="navegar-en-archivos-y-directorios" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Navegar en archivos y directorios<a class="anchor" aria-label="anchor" href="#navegar-en-archivos-y-directorios"><i class="fas fa-link"></i></a>
</h2>
<p>Cuando abrimos una terminal por primera vez, vamos a ver un <strong>prompt</strong> (usualmente es <code>$</code>) que nos indica que esta esperando los comandos. Después de teclear los comandos, debemos siempre presionar <kbd>Enter</kbd>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="shell.html#cb1-1" tabindex="-1"></a><span class="ex">$</span> </span></code></pre></div>
<p>Para listar lo que hay en un directorio usamos el comando <code>ls</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="shell.html#cb2-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre></div>
<pre class="output"><code>Documents  Downloads  Music  Pictures  Videos</code></pre>
<p>Al comando <code>ls</code> le podemos agregar unos <code>adjetivos</code> para hacer más comprensible su lectura. Por ejemplo, la opción <code>-F</code> nos indica si es una carpeta, un archivo, un link, etc.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="shell.html#cb4-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre></div>
<pre class="output"><code>ej.txt  Git/  PBI/  Python/  R/  Shell/  SQL/</code></pre>
<p>Con la opción <code>--help</code> podemos acceder a la ayuda del comando.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="shell.html#cb6-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre></div>
<p>Otras opciones que nos ayudan a entender la información que tenemos en el archivo son <code>-lh</code>, nos muestra los permisos del archivo o carpeta, tamaño, propietario, fecha, nombre. La opción <code>ls -a</code> nos muestra los archivos ocultos.</p>
<p><strong>Ejercicio:</strong> ¿Qué hace la opción <code>-l</code>? ¿Cómo podemos listar en orden de creación e inverso?</p>
<p>Con el comando <code>ls</code> también podemos listar los archivos de cualquier otro directorio, solo debemos indicarle el directorio después del comando:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="shell.html#cb7-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-</span> F Shell </span></code></pre></div>
<p>El comando <code>ls</code> solo nos esta listando lo que hay en los directorios. Si nos queremos mover a otro directorio, lo podemos hacer con el comando <code>cd</code> y especificando el directorio.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="shell.html#cb8-1" tabindex="-1"></a><span class="ex">$</span> cd Shell</span>
<span id="cb8-2"><a href="shell.html#cb8-2" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre></div>
<pre class="output"><code>data/  ej1.txt  ejercicios/</code></pre>
<p>El comando <code>pwd</code> nos da la ruta en la que estamos.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="shell.html#cb10-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre></div>
<pre class="output"><code>/d/Users/hayde/Documents/Curso_Comp_Cien/Shell</code></pre>
<p>Para movernos a un directorio arriba, colocamos después de <code>cd</code> dos puntos.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="shell.html#cb12-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre></div>
<p>Si no colocamos los dos puntos, el comando <code>cd</code> nos lleva al <code>/home/</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="shell.html#cb13-1" tabindex="-1"></a><span class="ex">$</span> cd </span></code></pre></div>
<p>Otra forma de movernos de un directorio a otro es especificando la <em>ruta absoluta</em>, es decir la ruta completa de a donde queremos movernos.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="shell.html#cb14-1" tabindex="-1"></a><span class="ex">$</span> cd /d/Users/hayde/Documents/Curso_comp_Cien</span></code></pre></div>
<p><strong>Ejercicio:</strong> ¿Qué es una ruta relativa?</p>
<p>Otro opción útil que podemos usar con el comando <code>cd</code> es <code>-</code>.</p>
<p><strong>Ejercicio:</strong> ¿A donde nos lleva <code>cd -</code>? y si volvemos a colocar <code>cd -</code> ¿a donde nos lleva? ¿Cuál es la diferencia entre <code>cd ..</code> y <code>cd -</code>?</p>
<p>La tilde <code>~</code>, shell la interpreta como el home del usuario, entonces si colocamos <code>cd ~/directorio</code> sería lo mismo que <code>/home/directorio</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="shell.html#cb15-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop</span></code></pre></div>
<p>es lo mismo que</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="shell.html#cb16-1" tabindex="-1"></a><span class="ex">$</span> cd /c/Users/hayde/Desktop</span></code></pre></div>
<p><strong>Ejercicio:</strong> Supongamos que tenemos el siguiente árbol de datos en nuestra computadora y que estamos en <code>/Users/thing/</code>. ¿Si colocamos en la terminal <code>ls -F ../backup</code> que nos mostrará?</p>
<div class="float">
<img src="img/ej_shell.png" alt="Ejercicio SC"><div class="figcaption">Ejercicio <a href="https://swcarpentry.github.io/shell-novice/02-filedir.html">SC</a>
</div>
</div>
<p><strong>Ejercicio:</strong> Explora las opciones <code>-s</code> y <code>-S</code>. ¿Hay diferencia entre mayúsculas y minúsculas?</p>
<p>La tecla <kbd>Tab</kbd> nos ayuda a completar los comando/rutas. Si la presionamos dos veces nos mostrará todas las posibles opciones.</p>
</div>
<div id="manipulación-de-archivos-y-directorios" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Manipulación de archivos y directorios<a class="anchor" aria-label="anchor" href="#manipulaci%C3%B3n-de-archivos-y-directorios"><i class="fas fa-link"></i></a>
</h2>
<p>Para crear directorios/carpetas desde la línea de comandos usamos el comando <code>mkdir nombre</code>. Vamos a crear la carpeta del curso. Es recomendable <strong>no usar espacios en nombres de carpetas ni archivos</strong>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="shell.html#cb17-1" tabindex="-1"></a><span class="ex">$</span> mkdir Curso_Comp_Cien</span></code></pre></div>
<p>El comando <code>mkdir</code> nos permite crear más de un directorio y directorios anidados usando la opción <code>-p</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="shell.html#cb18-1" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> Curso_Comp_Cien/Shell/data Curso_Comp_Cien/Shell/ejercicios</span></code></pre></div>
<p>Para listar toda la estructura de nuestras carpetas podemos usar la opción <code>-FR</code> en el comando <code>ls</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="shell.html#cb19-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-FR</span></span></code></pre></div>
<p>Otra opción útil para listar toda la estructura de nuestro directorio es la opción <code>tree</code>, no viene instalado por default en los sistemas operativos. En Windows, si se instalo git/bash se puede usar con <code>tree.com</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="shell.html#cb20-1" tabindex="-1"></a><span class="ex">$</span> tree.com</span></code></pre></div>
<p><strong>Nota:</strong> Para descargar <code>tree</code> y que podamos ver la estructura de árbol con archivos y carpetas hacer lo siguiente:</p>
<ol style="list-style-type: decimal">
<li><p>Ir a la <a href="https://gnuwin32.sourceforge.net/packages/tree.htm">página</a> y descargar la versión que dice <em>binaries</em>.</p></li>
<li><p>Extraer lo que hay en la carpeta <strong>bin</strong>.</p></li>
<li><p>Copiar el archivo <strong>tree.exe</strong> a la carpeta <code>/c/Program_files/Git/usr/bin/</code>.</p></li>
<li><p>Para probarlo, solo colocar en la terminal <code>tree ruta</code>.</p></li>
</ol>
<p>Para crear un archivo usando el editor nano (si fue el que configuraron), se usa el comando <code>nano nombre.extension</code>.
Vamos a crear un archivo de prueba en la carpeta ejercicios y escribamos algo en el archivo.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="shell.html#cb21-1" tabindex="-1"></a><span class="ex">$</span> cd Curso_Comp_Cien/</span>
<span id="cb21-2"><a href="shell.html#cb21-2" tabindex="-1"></a><span class="ex">$</span> nano prueba.txt</span></code></pre></div>
<p>Para guardar y salir del editor, usamos los comandos <kbd>Ctrl</kbd>+<kbd>O</kbd> o <kbd>Ctrl</kbd>+<kbd>X</kbd> seguido de <code>Yes</code> y enter.</p>
<p>Si en el archivo no guardaron nada, entonces no se creara. Una forma de crear archivos sin abrirlos es con el comando <code>touch</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="shell.html#cb22-1" tabindex="-1"></a><span class="ex">$</span> cd Shell/ejercicios</span>
<span id="cb22-2"><a href="shell.html#cb22-2" tabindex="-1"></a><span class="ex">$</span> touch ../ej1.txt ej2.txt ../data/ej3.csv ../data/ej4.csv</span></code></pre></div>
<p>Si checamos con <code>ls -l</code> los archivos o rutas que creamos, veremos que no tienen ningún tamaño.</p>
<p>Para mover archivos o renombrarlos, usamos el comando <code>mv</code> seguido del archivo que queremos mover/renombrar y la ruta a donde lo moveremos o el nuevo nombre del archivo.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="shell.html#cb23-1" tabindex="-1"></a><span class="ex">$</span> pwd</span>
<span id="cb23-2"><a href="shell.html#cb23-2" tabindex="-1"></a><span class="ex">$</span> mv ej2.txt ejercicio2.txt</span></code></pre></div>
<p>Lo anterior esta cambiándole el nombre al archivo <code>ej2.txt</code> por <code>ejercicio2.txt</code>.</p>
<p>Si estamos en un directorio y queremos mover un archivo de otro directorio al directorio actual, podemos hacerlo especificando como primer argumento la ruta y nombre del archivo a mover y como segundo argumento un punto <code>.</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="shell.html#cb24-1" tabindex="-1"></a><span class="ex">$</span> mv ../ej1.txt .</span></code></pre></div>
<p>O especificando la ruta completa.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="shell.html#cb25-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span>
<span id="cb25-2"><a href="shell.html#cb25-2" tabindex="-1"></a><span class="ex">$</span> mv data/ej3.csv ejercicios/.</span></code></pre></div>
<p>Para copiar archivos, usamos el comando <code>cp</code> seguido por la ruta del archivo a copiar y la ruta del archivo a donde se copiará. Movámonos a la carpeta <code>Shell/ejercicios</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="shell.html#cb26-1" tabindex="-1"></a><span class="ex">$</span> pwd</span>
<span id="cb26-2"><a href="shell.html#cb26-2" tabindex="-1"></a><span class="ex">$</span> cp ejercicio2.txt ../ej2.txt</span>
<span id="cb26-3"><a href="shell.html#cb26-3" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-FR</span></span></code></pre></div>
<p>Si usamos la opción <code>-r</code> (<em>recursivo</em>) en el comando <code>cp</code> podemos copiar un directorio completo y todos sus elementos.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="shell.html#cb27-1" tabindex="-1"></a><span class="ex">$</span> cd ejercicios</span>
<span id="cb27-2"><a href="shell.html#cb27-2" tabindex="-1"></a><span class="ex">$</span> cp <span class="at">-r</span> ../data .</span></code></pre></div>
<p>Si el último parámetro de <code>cp</code> es un directorio que ya existe, entonces copiará todos los archivos que se indiquen a ese directorio. Por ejemplo:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="shell.html#cb28-1" tabindex="-1"></a><span class="ex">$</span> cp archivo1.txt archivo2.txt data</span></code></pre></div>
<p>De igual forma para <code>mv</code>, si el último parámetro es un directorio movera todos los archivos a ese directorio.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="shell.html#cb29-1" tabindex="-1"></a><span class="ex">$</span> mv archivo1.txt archivo2.txt data</span></code></pre></div>
<p><strong>Ejercicio:</strong> ¿Cual es el output de la siguiente colección de comandos?</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="shell.html#cb30-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre></div>
<pre class="output"><code>/Users/haydee/Curso</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="shell.html#cb32-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre></div>
<pre class="output"><code>archivo.txt carpeta/</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="shell.html#cb34-1" tabindex="-1"></a><span class="ex">$</span> mkdir carpeta2</span>
<span id="cb34-2"><a href="shell.html#cb34-2" tabindex="-1"></a><span class="ex">$</span> mv archivo.txt carpeta2/</span>
<span id="cb34-3"><a href="shell.html#cb34-3" tabindex="-1"></a><span class="ex">$</span> cd carpeta2</span>
<span id="cb34-4"><a href="shell.html#cb34-4" tabindex="-1"></a><span class="ex">$</span> cp archivo.txt ../carpeta/archivo_respaldo.txt</span>
<span id="cb34-5"><a href="shell.html#cb34-5" tabindex="-1"></a><span class="ex">$</span> cd ..</span>
<span id="cb34-6"><a href="shell.html#cb34-6" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-FR</span></span></code></pre></div>
<p>Para borrar archivos usamos el comando <code>rm</code>, hay que tener cuidado cuando lo usemos ya que <strong>borra definitivamente</strong> los archivos o carpetas.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="shell.html#cb35-1" tabindex="-1"></a><span class="ex">$</span> cd Shell</span>
<span id="cb35-2"><a href="shell.html#cb35-2" tabindex="-1"></a><span class="ex">$</span> rm ejercicios/ejercicio2.txt</span>
<span id="cb35-3"><a href="shell.html#cb35-3" tabindex="-1"></a><span class="ex">$</span> ls ejercicios/</span></code></pre></div>
<p>Una forma segura de borrar archivos es usando la opción <code>-i</code>, con esto nos saldrá un mensaje preguntando si en verdad deseamos borrar el archivo. Para confirmar debemos colocar <code>y</code>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="shell.html#cb36-1" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-i</span> /data/ej3.csv</span></code></pre></div>
<pre class="output"><code>rm: remove regular empty file 'ej3.txt'?</code></pre>
<p>Si queremos borrar una carpeta, debemos hacerlo con la opción <code>-r</code>, de lo contrario obtendremos un error.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="shell.html#cb38-1" tabindex="-1"></a><span class="ex">$</span> rm data</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="shell.html#cb39-1" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-r</span> data</span></code></pre></div>
<p>Otra opción para borrar directorios es <code>rmdir</code>.</p>
<p>Para mover/copiar/eliminar multiples archivos a la vez, podemos enumerarlos todos o usar comodines/patrones que sigan estos elementos. Supongamos que tenemos una lista de archivos todos con terminación <code>.txt</code>, entonces para borrarlos podemos usar <code>rm *.txt</code>. El <code>*</code> nos indica todo lo que este antes de <code>.txt</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="shell.html#cb40-1" tabindex="-1"></a><span class="ex">$</span> cd Shell/</span>
<span id="cb40-2"><a href="shell.html#cb40-2" tabindex="-1"></a><span class="ex">$</span> touch prueba1.txt prueba2.txt prueba3.txt prueba4.txt prueba5.txt</span>
<span id="cb40-3"><a href="shell.html#cb40-3" tabindex="-1"></a><span class="ex">$</span> rm <span class="pp">*</span>.txt</span></code></pre></div>
<p>Otro comodín que podemos usar es <code>?</code>, pero este denota solo 1 espacio. Por ejemplo:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="shell.html#cb41-1" tabindex="-1"></a><span class="ex">$</span> cd Shell/</span>
<span id="cb41-2"><a href="shell.html#cb41-2" tabindex="-1"></a><span class="ex">$</span> touch prueba1.txt prueba2.txt prueba3.txt prueba4.txt prueba5.txt</span>
<span id="cb41-3"><a href="shell.html#cb41-3" tabindex="-1"></a><span class="ex">$</span> rm prueba<span class="pp">?</span>.txt</span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="shell.html#cb42-1" tabindex="-1"></a><span class="ex">$</span> cd Shell/</span>
<span id="cb42-2"><a href="shell.html#cb42-2" tabindex="-1"></a><span class="ex">$</span> touch prueba1.txt prueba2.txt prueba3.txt prueba4.txt prueba5.txt</span>
<span id="cb42-3"><a href="shell.html#cb42-3" tabindex="-1"></a><span class="ex">$</span> rm prue<span class="pp">???</span>.txt</span></code></pre></div>
<p><strong>Ejercicio:</strong> Supon que en el directorio <code>data</code> tienes dos archivos. ¿Cuál de los siguientes comandos te daría como resultado: <code>ethane.pdb</code> <code>methane.pdb</code>.</p>
<ol style="list-style-type: decimal">
<li><p><code>ls *t*ane.pdb</code></p></li>
<li><p><code>ls *t?ne.*</code></p></li>
<li><p><code>ls *t??ne.pdb</code></p></li>
<li><p>ls ethane.*</p></li>
</ol>
<p>Dos comodines más que existen son los siguientes:</p>
<ul>
<li><p><code>[...]</code>: busca coincidencias con exactamente cada caracter dentro de los corchetes, por ejemplo <code>[12]</code> coincidiria con <code>texto1.txt</code>, <code>texto2.tx</code> pero no con <code>texto3.txt</code>.</p></li>
<li><p><code>{...}</code>: busca coincidencias con cada uno de los elementos separados por comas dentro de las llaves, por ejemplo <code>{*.txt, *.csv}</code> buscaría todos los archivos con terminaciones <code>.txt</code> y <code>.csv</code> pero no con los que sean <code>.pdf</code>.</p></li>
</ul>
</div>
<div id="tuberías-y-filtros" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Tuberías y filtros<a class="anchor" aria-label="anchor" href="#tuber%C3%ADas-y-filtros"><i class="fas fa-link"></i></a>
</h2>
<p>Vamos a usar los archivos de prueba de la lección de Shell de Software Carpentry. Descargarlos en el directorio que creamos que se llama <a href="https://swcarpentry.github.io/shell-novice/data/shell-lesson-data.zip">Shell</a>.</p>
<p>Vamos a explorar los archivos que están en la carpeta <code>excercise-data/alkanes</code>. Para contar cuantos palabras, líneas o caracteres tiene un archivo, usamos el comando <code>wc</code> que viene de <code>word count</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="shell.html#cb43-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre></div>
<pre class="output"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="shell.html#cb45-1" tabindex="-1"></a><span class="ex">$</span> wc cubane.pdb</span></code></pre></div>
<pre class="output"><code>20  156 1158 cubane.pdb</code></pre>
<p>El primer número es el número de líneas del archivo, el segundo la cantidad de palabras y el tercero la cantidad de caracteres.</p>
<p>Si usamos alguna de los comodines, por ejemplo <code>*.pdb</code> con el comando <code>wc</code>, nos va a regresar la información de todos los archivos.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="shell.html#cb47-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="pp">*</span>.pdb</span></code></pre></div>
<p>Notemos que en la última fila tenemos los totales de todos los archivos. Accedamos a la ayuda del comando con <code>help</code>.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="shell.html#cb48-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">--help</span></span></code></pre></div>
<p><strong>Ejercicio:</strong> ¿Cuál opción nos permite extraer solo la cantidad de líneas del archivo?</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="shell.html#cb49-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb</span></code></pre></div>
<p>Si por error olvidamos colocar el nombre del archivo o cualquier otra cosa después del comando, la consola se quedará esperando una instrucción, para salir de esto basta presionar <kbd>Ctrl</kbd>+<kbd>C</kbd>.</p>
<p>Ya sabemos como extraer cierta información de nuestros archivos, pero supongamos que queremos guardarlo ahora en algún otro archivo para después analizarlo. El símbolo <code>&gt;</code> redirige el resultado de los comandos usados a algún archivo.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="shell.html#cb50-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="op">&gt;</span> lineas.txt</span></code></pre></div>
<p>Para solo visualizar el contenido de un archivo sin entrar al editor de texto, podemos usar el comando <code>cat</code> seguido del nombre del archivo.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="shell.html#cb51-1" tabindex="-1"></a><span class="ex">$</span> cat lineas.txt</span></code></pre></div>
<p>Otro comando que puede resultar más útil para mostrar el contenido de un archivo es <code>less</code>, la diferencia con <code>cat</code> es que este último muestra todo el contenido en la pantalla, lo cual puede dificultar su lectura e inspección, mientras que <code>less</code> muestra una parte del contenido y de forma ordenada, si queremos seguir viendo el contenido podemos usar la tecla de espacio, b y para salir usamos la letra <code>q</code>.</p>
<p>Ya guardamos la información de la cantidad de líneas, pero supongamos que queremos saber cual archivo tiene la mayor cantidad de líneas o menor. Para hacer esto nos sirve el comando <code>sort</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="shell.html#cb52-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span>
<span id="cb52-2"><a href="shell.html#cb52-2" tabindex="-1"></a><span class="ex">$</span> sort numbers.txt</span></code></pre></div>
<p>Si a <code>sort</code> le agregamos la opción <code>-n</code>, nos los ordena en numericamente en lugar de alfabeticamente.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="shell.html#cb53-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> numbers.txt</span></code></pre></div>
<p><strong>Ejercicio:</strong> De los archivos que están en la carpeta <code>alkane</code>, ¿cuál tiene la menor cantidad de líneas?</p>
<p>También podemos redirigir esta información a otro archivo y de ahí extraer la información.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="shell.html#cb54-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lineas.txt <span class="op">&gt;</span> lineas_ordenadas.txt</span></code></pre></div>
<p>El comando <code>head</code> nos ayuda a extraer las primeras <code>n</code> líneas de nuestro archivo. Por ejemplo, para extraer la primera línea del archivo <code>lineas_ordenadas.txt</code> y así saber cual archivo tenía la menor cantidad de líneas usaríamos <code>head -n 1</code>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="shell.html#cb55-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 lineas_ordenadas.txt</span></code></pre></div>
<p>El comando <code>echo</code> nos ayuda a imprimir en la consola caracteres.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb56-1"><a href="shell.html#cb56-1" tabindex="-1"></a><span class="ex">$</span> echo Hola</span></code></pre></div>
<p><strong>Ejercicio:</strong> Realiza las siguientes instrucciones dos veces cada una. Explora las diferencias. ¿Qué hace el operador <code>&gt;&gt;</code>?</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb57-1"><a href="shell.html#cb57-1" tabindex="-1"></a><span class="ex">$</span> echo hola <span class="op">&gt;</span> test1.txt</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="shell.html#cb58-1" tabindex="-1"></a><span class="ex">$</span> echo hola <span class="op">&gt;&gt;</span> test2.txt</span></code></pre></div>
<p>El comando <code>tail</code> es similar al comando <code>head</code>, nos muestra las últimas <code>n</code> filas del archivo.</p>
<p><strong>Ejercicio:</strong> Considera el archivo <code>/exercise-data/animal-counts/animals.csv</code>. Después de aplicar los siguientes dos comandos, ¿qué hay en el archivo <code>animals-subset.csv</code>?</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="shell.html#cb59-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 3 animals.csv <span class="op">&gt;</span> animals-subset.csv</span>
<span id="cb59-2"><a href="shell.html#cb59-2" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 2 animals.csv <span class="op">&gt;&gt;</span> animals-subset.csv</span></code></pre></div>
<div id="tuberías" class="section level3" number="2.3.1">
<h3>
<span class="header-section-number">2.3.1</span> Tuberías<a class="anchor" aria-label="anchor" href="#tuber%C3%ADas"><i class="fas fa-link"></i></a>
</h3>
<p>Además de redirigir los output de los comandos que hemos ocupado, también podríamos anidarlos y al final mandarlo a un archivo. Para hacer esto se usan <strong>tuberías</strong> y su símbolo es <code>|</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb60-1"><a href="shell.html#cb60-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lineas.txt <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre></div>
<p>En esta instrucción le estamos diciendo a la consola que primero nos ordene lo que hay en el archivo líneas en orden númerico y después que nos muestre la primera línea. De esta forma nos evitamos por ejemplo el haber creado el archivo <code>lineas_ordenadas.txt</code>.</p>
<p>Podemos anidar varias instrucciones a la vez. Por ejemplo, podríamos pedirle a la consola la cantidad de líneas de los archivos <code>*.pdb</code>, pedirle que las ordene numericamente y después que extraiga la primera línea.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="shell.html#cb61-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre></div>
<p><strong>Ejercicio:</strong> De los archivos que están en la carpeta <code>alkanes</code>, obten los 3 archivos con la menor cantidad de líneas.</p>
<p><strong>Ejercicio:</strong> Explora el archivo <code>exercise-data/animals-counts/animals.csv</code>. ¿Cuál será el resultado de la siguiente instrucción?</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb62-1"><a href="shell.html#cb62-1" tabindex="-1"></a><span class="ex">$</span> cat animals.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5 <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 3 <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-r</span> <span class="op">&gt;</span> final.txt</span></code></pre></div>
<p>El comando <code>cut</code> nos ayuda a extrar/cortar ciertas columnas de nuestros archivos. Por ejemplo, <code>cut -d , -f 2 archivo</code> nos está indicando que del archivo queremos cortar por caracteres <code>,</code> (eso hace <code>-d ,</code>) y que queremos extraer la segunda columna (<code>-f 2</code>).</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb63-1"><a href="shell.html#cb63-1" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv</span></code></pre></div>
<p>Si quisieramos extraer los animales únicos de ese archivo, podemos usar el comando <code>uniq</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb64-1"><a href="shell.html#cb64-1" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span></code></pre></div>
<p>También se puede colocar por ejemplo <code>-f 2-5,8</code> para indicar que se deben seleccionar las columnas 2 a la 5 y la 8.</p>
<p><strong>Ejercicio:</strong> ¿Porqué se necesita colocar el <code>sort</code> antes del <code>uniq</code>?</p>
<p><strong>Ejercicio:</strong> Si quisiéramos ver cuantos animales hay de cada tipo, ¿que instrucción tendríamos que usar?</p>
</div>
</div>
<div id="ciclos" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Ciclos<a class="anchor" aria-label="anchor" href="#ciclos"><i class="fas fa-link"></i></a>
</h2>
<p>Los ciclos nos ayudan a repetir comandos o un conjunto de comandos para cada elemento de una lista. La estructura del ciclo <code>for</code> es como sigue:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb65-1"><a href="shell.html#cb65-1" tabindex="-1"></a><span class="cf">for</span> elemento <span class="kw">in</span> lista</span>
<span id="cb65-2"><a href="shell.html#cb65-2" tabindex="-1"></a><span class="cf">do</span> </span>
<span id="cb65-3"><a href="shell.html#cb65-3" tabindex="-1"></a>  <span class="ex">operacion/comando</span> <span class="va">$elemento</span></span>
<span id="cb65-4"><a href="shell.html#cb65-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<p>La palabra <code>for</code> indica el comienzo del ciclo, la palabra <code>do</code> nos indica que es lo que se va a ejecutar y su comienzo y la palabra <code>done</code> indica el fin del ciclo.</p>
<p>Exploremos lo que hay en la carpeta <code>~/Shell/shell-lesson-data/exercise-data/creatures</code>. Listemos las primeras 5 filas de cada archivo.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb66-1"><a href="shell.html#cb66-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 5 basilisk.dat minotaur.dat unicorn.dat</span></code></pre></div>
<p>Supongamos que queremos ver la clasificación de cada especie que se encuentra en la segunda línea de cada archivo. Una forma de hacerlo es con <code>head -n 2</code>, pero de esta forma también estamos viendo su nombre común, entonces vamos a hacerlo con un ciclo. Lo primero que tendríamos que hacer es usar justo <code>head -n 2</code> y al resultado de esto, si le pedimos la última línea ya solo veríamos la clasificación, entonces usamos un <code>tail -n 1</code>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb67-1"><a href="shell.html#cb67-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb67-2"><a href="shell.html#cb67-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb67-3"><a href="shell.html#cb67-3" tabindex="-1"></a><span class="op">&gt;</span>   echo <span class="va">$filename</span></span>
<span id="cb67-4"><a href="shell.html#cb67-4" tabindex="-1"></a><span class="op">&gt;</span>   head <span class="ex">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb67-5"><a href="shell.html#cb67-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Notemos que cuando empezamos a teclear nuestro ciclo, el prompt cambia de <code>$</code> a <code>&gt;</code>, esto indica que está esperando que continuemos el ciclo. También podemos usar <code>;</code> para continuar las instrucciones en una misma fila.</p>
<p>Dentro de los ciclos, las variables las mandamos a llamar con <code>$</code>, en el ejemplo, cuando ocupamos <code>$filename</code> estamos mandando a llamar la variable <code>filename</code> que definimos al inicio del ciclo. Es muy usual también encerrar entre llaves los nombres de las variables para delimitar el nombre, en el ejemplo, <code>$filename</code> sería equivalente a <code>${filename}</code>.</p>
<p><strong>Ejercicio:</strong> Crea un ciclo que muestre en pantalla (echo) todos los números del 0 al 9.</p>
<p><strong>Ejercicio:</strong> Ve a la carpeta <code>shell-lesson-data/exercise-data/alkanes</code> y lista lo que hay.
1) ¿Cuál es el output del siguiente código?</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb68-1"><a href="shell.html#cb68-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb68-2"><a href="shell.html#cb68-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb68-3"><a href="shell.html#cb68-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">*.pdb</span></span>
<span id="cb68-4"><a href="shell.html#cb68-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>¿Y de este código?</li>
</ol>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb69-1"><a href="shell.html#cb69-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.odb</span>
<span id="cb69-2"><a href="shell.html#cb69-2" tabindex="-1"></a><span class="op">&gt;</span> do </span>
<span id="cb69-3"><a href="shell.html#cb69-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$datafile</span></span>
<span id="cb69-4"><a href="shell.html#cb69-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Explica las diferencias.</p>
<p><strong>Ejercicio:</strong> En el directorio <code>shell-lesson-data/exercise-data/alkanes</code>, ¿cuál sería el output del siguiente código?</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb70-1"><a href="shell.html#cb70-1" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb70-2"><a href="shell.html#cb70-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb70-3"><a href="shell.html#cb70-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb70-4"><a href="shell.html#cb70-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Y si en lugar de <code>c*</code> usamos <em>c</em>?</p>
<p>Dentro de un ciclo también podemos pedir guardar archivos.</p>
<p><strong>Ejercicio:</strong> Explora el siguiente código. ¿Cuál es el efecto de guardar en este ciclo?</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb71-1"><a href="shell.html#cb71-1" tabindex="-1"></a><span class="ex">$</span> for alkanes in <span class="pp">*</span>.pdb</span>
<span id="cb71-2"><a href="shell.html#cb71-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb71-3"><a href="shell.html#cb71-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$alkanes</span></span>
<span id="cb71-4"><a href="shell.html#cb71-4" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$alkanes</span> <span class="op">&gt;</span> alkanes.pdb</span>
<span id="cb71-5"><a href="shell.html#cb71-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>¿Cuál sería la diferencia si usamos ahora <code>&gt;&gt;</code>?</p>
<p><strong>Ejercicio:</strong> Crea un ciclo que muestre las últimas 20 líneas de cada archivo en la carpeta <code>creatures</code>.</p>
<p>Como ya mencionamos, no es recomendable usar espacios ni caracteres especiales en nombres de archivos o carpetas. Si fuera el caso de que nuestros archivos tienen espacios, entonces deberíamos pasarlos al ciclo for encerrados entre comillas los nombres. Por ejemplo, supongamos que tenemos los archivos <code>archivo 1.txt</code> y <code>archivo 2.txt</code>. Para leerlos en el ciclo for tendríamos que usar la siguiente sintaxis.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb72-1"><a href="shell.html#cb72-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="st">"archivo 1.txt"</span> <span class="st">"archivo 2.txt"</span></span>
<span id="cb72-2"><a href="shell.html#cb72-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb72-3"><a href="shell.html#cb72-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n20</span> <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n5</span> </span>
<span id="cb72-4"><a href="shell.html#cb72-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Supongamos que queremos modificar nuestros archivos que se encuentran en la carpeta <code>creatures</code> pero que antes queremos respaldarlos en otros archivos llamados <code>original-basilisk.dat</code>, <code>original-unicorn.dat</code> y <code>original-minotaur.dat</code>. Una forma de hacerlo sería copiarlos a nuevos archivos con esos nombres, pero si no lo queremos hacer manualmente, ¿qué pasa si usamos el siguiente código?</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb73-1"><a href="shell.html#cb73-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>.dat original-<span class="pp">*</span>.dat</span></code></pre></div>
<p>Esto nos va a dar un error porque el comando <code>cp</code> estaría esperando que <code>original-</code> sea una carpeta y no lo es, no existe esa carpeta. Entonces lo que podemos hacer es usar un ciclo.</p>
<p><strong>Ejercicio:</strong> Crea un ciclo <code>for</code> que copie los dos archivos a dos nuevos archivos llamados <code>original-basilisk.dat</code>, <code>original-unicorn.dat</code> y <code>original-minotaur.dat</code>.</p>
<p>El comando <code>cp</code> no nos muestra en pantalla ningún output. Si quisieramos ver que en efecto se esta realizando la copia de estos archivos podemos usar el comando <code>echo</code> y pedir que nos diga como “se copio el archivo $filename”. Usar <code>echo</code> de esta forma es una buena práctica de realizar lo que se llama <strong>debugging</strong>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="shell.html#cb74-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb74-2"><a href="shell.html#cb74-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb74-3"><a href="shell.html#cb74-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cp</span> <span class="va">$filename</span> original-<span class="va">$filename</span></span>
<span id="cb74-4"><a href="shell.html#cb74-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<div class="float">
<img src="img/shell_script_for_loop_flow_chart.png" alt="Debugging"><div class="figcaption">Debugging</div>
</div>
<p><strong>Ejercicio:</strong> Supongamos que queremos previsualizar los comandos que el siguiente ciclo va a realizar en lugar de correrlo primero para asegurarnos de que está haciendo lo que queremos.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="shell.html#cb75-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.pdb</span>
<span id="cb75-2"><a href="shell.html#cb75-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb75-3"><a href="shell.html#cb75-3" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$filename</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb75-4"><a href="shell.html#cb75-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>¿Cuál de los siguientes dos códigos sería el correcto para revisar los comando a ejecutarse con el ciclo?</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb76-1"><a href="shell.html#cb76-1" tabindex="-1"></a><span class="co"># Versión 1</span></span>
<span id="cb76-2"><a href="shell.html#cb76-2" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.pdb</span>
<span id="cb76-3"><a href="shell.html#cb76-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb76-4"><a href="shell.html#cb76-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cat</span> <span class="va">$filename</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb76-5"><a href="shell.html#cb76-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="shell.html#cb77-1" tabindex="-1"></a><span class="co"># Versión 2</span></span>
<span id="cb77-2"><a href="shell.html#cb77-2" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.pdb</span>
<span id="cb77-3"><a href="shell.html#cb77-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb77-4"><a href="shell.html#cb77-4" tabindex="-1"></a><span class="op">&gt;</span>    echo <span class="st">"cat </span><span class="va">$filename</span><span class="st"> &gt;&gt; all.pdb"</span></span>
<span id="cb77-5"><a href="shell.html#cb77-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Corre los dos códigos y explora el contenido del archivo <code>all.pdb</code>.</p>
<p>Supongamos que queremos crear una estructura de directorios como sigue, para cada compuesto y cada temperatura queremos una carpeta para ir guardando ahí sus resultados, y que cada carpeta se llame <code>compuesto-temperatura</code>, ¿cómo podemos hacer esto? Una opción son los ciclos anidados.</p>
<div class="float">
<img src="img/estructura-alkanes.png" alt="estructura-experimentos"><div class="figcaption">estructura-experimentos</div>
</div>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="shell.html#cb78-1" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane </span>
<span id="cb78-2"><a href="shell.html#cb78-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb78-3"><a href="shell.html#cb78-3" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb78-4"><a href="shell.html#cb78-4" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb78-5"><a href="shell.html#cb78-5" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb78-6"><a href="shell.html#cb78-6" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb78-7"><a href="shell.html#cb78-7" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Algunos comandos útiles para ver el historial de comadnos.</p>
<ul>
<li><p><code>history</code> nos muestra el historial de comandos.</p></li>
<li><p><kbd>Ctrl</kbd>+<kbd>R</kbd> nos muestra la leyenda <code>reverse-i-search</code>, esto indica que está esperando que nosotros coloquemos una palabra y buscará por el último comando con esa palabra.</p></li>
<li><p><code>history</code> + <code>!123</code> nos repetirá el comando <code>!123</code> del historial.</p></li>
<li><p><code>!!</code> nos muestra el último comando usado.</p></li>
<li><p><code>!$</code> nos regresa la última palabra del último comando.</p></li>
</ul>
<p><strong>Ejercicio:</strong> En la carpeta <code>norht-pacific-gyre</code> se encuentran dos scripts (<code>.sh</code>) y una lista de archivos. Esta lista de archivos tiene terminaciones A, B y en el caso de que la terminación sea Z significa que el archivo está corrupto.</p>
<ol style="list-style-type: decimal">
<li>¿Cómo podrías darte cuenta que los archivos con terminación Z están corruptos?</li>
</ol>
<p>Supongamos que queremos ejecutar el script llamado <code>goostats.sh</code>, este script necesita recibir dos cosas, el archivo de entrada y el nombre del archivo de salida. Supongamos que queremos correr este script para todos los archivos con terminación A y B y que queremos que los archivos de salida se llamen <code>stats-$datafile</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Crea un ciclo que te muestre en pantalla el nombre del archivo a usar como input.</p></li>
<li><p>Crea un ciclo que te muestre en pantalla el nombre del archivo de salida con el formato indicado. Pero quieres asegurarte que para el archivo input sea el nombre correcto el del archivo de salida.</p></li>
<li><p>Crea un ciclo que muestre los comandos a usarse para correr el script con los archivos de entrada y de salida del paso 2 y 3. Para correr un script como se indica, se usa el comando <code>bash nombre_archivo.sh input output</code>.</p></li>
<li><p>Agrega un <code>echo $datafile</code> para saber en que archivo va tu ciclo.</p></li>
</ol>
</div>
<div id="scripts" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Scripts<a class="anchor" aria-label="anchor" href="#scripts"><i class="fas fa-link"></i></a>
</h2>
<p>Los scripts nos ayudan a repetir los comandos sobre listas de archivos. Supongamos que existen ciertos comando que siempre repetimos, vamos a guardarlos en un archivo para con un solo comando ejecutar esa lista de comandos.</p>
<p>Vamos al directorio <code>alkanes</code>. Supongamos que siempre queremos extraer las líneas de la 11 a la 15 de cada archivo. Por ejemplo, una forma en la que lo hacemos es:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="shell.html#cb79-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 15 octane.pdb <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre></div>
<p>Vamos a escribir eso en un archivo:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="shell.html#cb80-1" tabindex="-1"></a><span class="ex">$</span> cd alkanes</span>
<span id="cb80-2"><a href="shell.html#cb80-2" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre></div>
<p>Guardemos eso. Para ejecutarlo bastaría correr lo siguiente:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="shell.html#cb81-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh</span></code></pre></div>
<p>Supongamos que queremos las líneas de la 11 a la 15 pero de cualquier otro archivo. Vamos a modificar el archivo que creamos.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="shell.html#cb82-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre></div>
<div class="sourceCode" id="cb83"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb83-1"><a href="shell.html#cb83-1" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> 15 <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre></div>
<p>En el script, cuando colocamos <code>"$1"</code> se refiere al primer argumento/archivo en la línea de comandos, por ejemplo cuando colocamos en la línea de comandos:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb84-1"><a href="shell.html#cb84-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh octane.pdb</span></code></pre></div>
<p>Lo que estamos diciéndole a la consola es que reemplace dentro del script “$1” por el archivo <code>octane.pdb</code>. De esta forma nuestro script ahora lo podemos correr sobre cualquier archivo.</p>
<p>Nuestro script por el momento funciona solo con las líneas de la 11 a la 15. Supongamos que queremos modificar esto de tal forma que cuando vayamos a ejecutar el script le indiquemos las líneas que queremos extraer. Así como usamos <code>$1</code> para indicarle que era la primera variable en la línea de comandos, podemos usar las variables <code>$2</code> y <code>$3</code> para indicarle la segunda y tercera variable.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb85-1"><a href="shell.html#cb85-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb86-1"><a href="shell.html#cb86-1" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$2</span><span class="st">"</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$3</span><span class="st">"</span></span></code></pre></div>
<p>Entonces podemos ejecutar el script como sigue:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb87-1"><a href="shell.html#cb87-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh octane.pdb 15 5</span></code></pre></div>
<p>Y podemos cambiar las líneas a mostrar, por ejemplo:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb88-1"><a href="shell.html#cb88-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh octane.pdb 20 5</span></code></pre></div>
<p>Lo único que falta en el script, es describir que hace, de esta forma cualquier otra persona (o nosotros más adelante), cuando queramos abrir el script podamos recordar y entender que argumentos pide y cual es su uso.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb89-1"><a href="shell.html#cb89-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre></div>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb90-1"><a href="shell.html#cb90-1" tabindex="-1"></a><span class="co"># Selecciona líneas intermedias de un archivo.</span></span>
<span id="cb90-2"><a href="shell.html#cb90-2" tabindex="-1"></a><span class="co"># Uso: bash middle.sh nombre_archivo linea_final linea_inicial</span></span>
<span id="cb90-3"><a href="shell.html#cb90-3" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$2</span><span class="st">"</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$3</span><span class="st">"</span></span></code></pre></div>
<p>Ahora, supongamos que queremos ordenar los archivos <code>.pdb</code> por cantidad de líneas. Sin un script eso lo hacemos así:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb91-1"><a href="shell.html#cb91-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> </span></code></pre></div>
<p>Si queremos poner esto en un script pero queremos correrlo sobre varios tipos de archivos, digamos los <code>.pdb</code> y los <code>.dat</code>, no podemos colocar en nuestro script <code>*.pdb</code>, y si usamos como en los ejemplos anteriores <code>"$1"</code> o <code>"$2</code>, eso limitaría la cantidad de archivos que podemos pasarle después en la consola. Una forma de no depender de eso es con la variable <code>$@</code>, esto indica que pueden ser cualquier cantidad de argumentos en la línea de comandos.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb92-1"><a href="shell.html#cb92-1" tabindex="-1"></a><span class="ex">$</span> nano sorted.sh</span></code></pre></div>
<div class="sourceCode" id="cb93"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb93-1"><a href="shell.html#cb93-1" tabindex="-1"></a><span class="co"># Ordena archivos por su longitud</span></span>
<span id="cb93-2"><a href="shell.html#cb93-2" tabindex="-1"></a><span class="co"># Uso: bash sorted.sh uno_o_mas_archivos</span></span>
<span id="cb93-3"><a href="shell.html#cb93-3" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre></div>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb94-1"><a href="shell.html#cb94-1" tabindex="-1"></a><span class="ex">$</span> bash sorted.sh <span class="pp">*</span>.pdb ../creatures/<span class="pp">*</span>.dat</span></code></pre></div>
<p><strong>Ejercicio:</strong> El archivo <code>animals.csv</code> ya vimos que es un archivo separado por comas que indica las especies y la cantidad de cada uno. Crea un script que se pueda aplicar a cualquier cantidad de archivos con ese formato y que te diga las especies únicas de cada archivo.
Crea 3 archivos similares al <code>animals.csv</code> (copia y modifica) y prueba tu script.</p>
<p><strong>Ejercicio:</strong> Corre el siguiente comando:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb95-1"><a href="shell.html#cb95-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5 <span class="op">&gt;</span> recientes.sh</span></code></pre></div>
<p>¿Qué contiene ese archivo? ¿Observa la última línea del archivo? ¿Porqué guarda esa línea?</p>
<p><strong>Ejercicio:</strong> En la carpeta <code>alkanes</code> supongamos que tenemos un <code>script.sh</code> que contiene lo siguiente:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb96-1"><a href="shell.html#cb96-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> <span class="va">$2</span> <span class="va">$1</span></span>
<span id="cb96-2"><a href="shell.html#cb96-2" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> <span class="va">$3</span> <span class="va">$1</span></span></code></pre></div>
<p>Dentro del directorio <code>alkanes</code>, corre lo siguiente:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb97-1"><a href="shell.html#cb97-1" tabindex="-1"></a><span class="ex">$</span> bash script.sh <span class="st">'*.pdb'</span> 1 1</span></code></pre></div>
<p>¿Qué esperas obtener?</p>
<p><strong>Ejercicio:</strong> Crea un script llamado <code>longest.sh</code> que reciba como argumentos un directorio y una extensión de archivos y que te devuelva el archivo en el directorio, que tenga esa extensión, con el mayor número de líneas.</p>
<p><strong>Ejercicio:</strong> Considera los archivos que están en la carpeta <code>alkanes</code>. Explica que hace cada uno de los siguientes scripts al correrlos como <code>bash script1.sh *.pdb</code>, <code>bash script2.sh *.pdb</code> y <code>bash script3.sh *.pdb</code>.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="shell.html#cb98-1" tabindex="-1"></a><span class="co"># Script 1</span></span>
<span id="cb98-2"><a href="shell.html#cb98-2" tabindex="-1"></a><span class="bu">echo</span> <span class="pp">*</span>.<span class="pp">*</span></span></code></pre></div>
<div class="sourceCode" id="cb99"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb99-1"><a href="shell.html#cb99-1" tabindex="-1"></a><span class="co"># Script 2</span></span>
<span id="cb99-2"><a href="shell.html#cb99-2" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> <span class="va">$1</span> <span class="va">$2</span> <span class="va">$3</span></span>
<span id="cb99-3"><a href="shell.html#cb99-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb99-4"><a href="shell.html#cb99-4" tabindex="-1"></a>  <span class="fu">cat</span> <span class="va">$filename</span></span>
<span id="cb99-5"><a href="shell.html#cb99-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb100-1"><a href="shell.html#cb100-1" tabindex="-1"></a><span class="co"># Script 3</span></span>
<span id="cb100-2"><a href="shell.html#cb100-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$@</span>.pdb</span></code></pre></div>
<p><strong>Ejercicio:</strong> (Debugging) Supongamos que tienen el siguiente script <code>do-errors.sh</code> en la carpeta <code>north-pacific-gyre</code>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="shell.html#cb101-1" tabindex="-1"></a><span class="co"># Calcular estadisticas para los archivos</span></span>
<span id="cb101-2"><a href="shell.html#cb101-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb101-3"><a href="shell.html#cb101-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb101-4"><a href="shell.html#cb101-4" tabindex="-1"></a>  <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb101-5"><a href="shell.html#cb101-5" tabindex="-1"></a>  <span class="fu">bash</span> goostats.sh <span class="va">$datfile</span> stats-<span class="va">$datafile</span></span>
<span id="cb101-6"><a href="shell.html#cb101-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<p>Corre en la línea de comandos:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb102-1"><a href="shell.html#cb102-1" tabindex="-1"></a><span class="ex">$</span> bash do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre></div>
<p>No muestra ninguna salida. Para ver porque, vamos a correrlo de nuevo con la opción -x:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb103-1"><a href="shell.html#cb103-1" tabindex="-1"></a><span class="ex">$</span> bash <span class="at">-x</span> do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre></div>
<p>¿Cuál es el output? ¿Cuál es la línea responsable del error?</p>
<p>Otra asignación de variables es <code>#@</code>, esto nos indica cuantos objetos hay de la variable.</p>
<p>Tres conceptos usados en bash son los siguientes:</p>
<ul>
<li><p>STDIN: estándar input</p></li>
<li><p>STDOUT: estándar output</p></li>
<li><p>STDERR: estándar error</p></li>
</ul>
<p>Para redirigir el error y el output automáticamente a archivos, usamos las opciones:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb104-1"><a href="shell.html#cb104-1" tabindex="-1"></a><span class="ex">$</span> <span class="dv">2</span><span class="op">&gt;</span> error.txt <span class="kw">&amp;</span> <span class="dv">1</span><span class="op">&gt;</span> output.txt</span></code></pre></div>
<p>O dentro de un script:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb105-1"><a href="shell.html#cb105-1" tabindex="-1"></a><span class="bu">exec</span> <span class="dv">1</span><span class="op">&gt;&gt;</span> output.txt <span class="dv">2</span><span class="op">&gt;&gt;</span> error.txt</span></code></pre></div>
<p>Al inicio de un script se suele colocar <code>#!/usr/bash</code> para que el interprete sepa que es un script de bash y use el bash que se encuentra en <code>usr/bash</code>. Si no está ahí se coloca la ruta correspondiente, para saber donde está usamos <code>which bash</code>.</p>
</div>
<div id="buscando-y-encontrando-cosas" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Buscando y encontrando cosas<a class="anchor" aria-label="anchor" href="#buscando-y-encontrando-cosas"><i class="fas fa-link"></i></a>
</h2>
<p>La función <code>grep</code> (<em>global/regular expression/print</em>) nos ayuda a encontrar e imprimir líneas de archivos que contengan un patrón especificado.</p>
<p>Vamos a la ruta <code>excercise-data/writing</code>.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb106-1"><a href="shell.html#cb106-1" tabindex="-1"></a><span class="ex">$</span> cat haiku.txt</span></code></pre></div>
<p>Para buscar las líneas que contienen la palabra <code>not</code>, la instrucción sería la siguiente:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb107-1"><a href="shell.html#cb107-1" tabindex="-1"></a><span class="ex">$</span> grep not haiku.txt</span></code></pre></div>
<p>El comando <code>grep</code> es sensible a mayúsculas y minúsculas. Si buscáramos por ejemplo <code>Not</code> no nos encontraría ninguna coincidencia.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb108-1"><a href="shell.html#cb108-1" tabindex="-1"></a><span class="ex">$</span> grep The haiku.txt</span></code></pre></div>
<p>Observemos que ahora nos está regresando una palabra que contiene <code>The</code> en su estructura: <code>Thesis</code>. Para restringir a que solo sean coincidencias exactas, usamos la bandera <code>-w</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb109-1"><a href="shell.html#cb109-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> The haiuku.txt</span></code></pre></div>
<p>En el caso de querer buscar frases, debemos encerrarlas entre comillas.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb110-1"><a href="shell.html#cb110-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> <span class="st">"is not"</span> haiku.txt</span></code></pre></div>
<p>Si agregamos la opción <code>-n</code>, esto nos mostrará también la línea en la que se encuentra la coincidencia.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb111-1"><a href="shell.html#cb111-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="st">"it"</span> haiku.txt</span></code></pre></div>
<p>Las banderas se pueden combinar, por ejemplo <code>-nw</code> (<code>-wn</code> o <code>-n -w</code>) nos buscaría coincidencias exactas y los números de líneas.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb112-1"><a href="shell.html#cb112-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-nw</span> <span class="st">"it"</span> haiku.txt</span></code></pre></div>
<p>Para que no nos importe mayúsculas o minúsculas, usamos la opción <code>-i</code>.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb113-1"><a href="shell.html#cb113-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-i</span> <span class="st">"the"</span> haiku.txt</span></code></pre></div>
<p>La opción <code>-v</code> es para invertir nuestra búsqueda, es decir para mostrarnos las líneas que no contienen esa palabra/frase.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb114-1"><a href="shell.html#cb114-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-v</span> <span class="st">"the"</span> haiku.txt</span></code></pre></div>
<p>La opción <code>-r</code> busca recursivamente por la coincidencia en un conjunto de archivos indicados.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb115-1"><a href="shell.html#cb115-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-r</span> Yesterday .</span></code></pre></div>
<p><strong>Ejercicio:</strong> ¿Cómo obtendrían solo lo siguiente del archivo <code>haiku.txt</code>?</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb116-1"><a href="shell.html#cb116-1" tabindex="-1"></a><span class="ex">and</span> the presence of absence.</span></code></pre></div>
<p>Dentro del comando <code>grep</code> también podemos usar comodines (expresiones regulares), por ejemplo:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb117-1"><a href="shell.html#cb117-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-E</span> <span class="st">"^.o"</span> haiku.txt</span></code></pre></div>
<p>El <code>^</code> se refiere al inicio de la línea, el <code>.</code> se refiere a un carácter (análogo a <code>?</code>), entonces estaría buscando todas las líneas una palabra donde su segunda letra sea la letra <code>o</code>.</p>
<p><strong>Ejercicio:</strong> El archivo que se encuentra en la carpeta <code>animal-counts/animals.csv</code> contiene una lista de animales, con su fecha de observación y cuantos animales se observaron.</p>
<pre class="output"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>Supongamos que queremos crear un script que tome como primer argumento la especie del animal y como segundo argumento el directorio. El script nos debe regresar un archivo llamado <code>&lt;especie&gt;.txt</code> que contenga una lista de fechas y el número de veces que se observo esa especie. Por ejemplo, <code>rabbit.txt</code> tendría que contener la siguiente información:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb119-1"><a href="shell.html#cb119-1" tabindex="-1"></a><span class="ex">2012-11-05,22</span></span>
<span id="cb119-2"><a href="shell.html#cb119-2" tabindex="-1"></a><span class="ex">2012-11-06,19</span></span>
<span id="cb119-3"><a href="shell.html#cb119-3" tabindex="-1"></a><span class="ex">2012-11-07,16</span></span></code></pre></div>
<p>Usa las opciones de ayuda de los comandos <code>cut</code> y <code>grep</code> (puedes usar <code>man grep</code> o <code>man cut</code> también para pedir ayuda de esos comandos, la palabra <code>man</code> se refiere a manual.)</p>
<p><strong>Ejercicio:</strong> En la carpeta <code>exercise-data/writing</code> se encuentra el texto completo de Mujercitas <code>LittleWomen.txt</code>. Usando un <code>for</code> encuentra que hermana aparece más veces: <em>Jo</em>, <em>Meg</em>, <em>Beth</em>, <em>Amy</em>.</p>
<p>No solo podemos buscar una sola palabra, podríamos buscar dos palabras o buscar entre dos palabras:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb120-1"><a href="shell.html#cb120-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-E</span> <span class="st">"cadena1|cadena2"</span> archivo</span></code></pre></div>
<p><strong>Ejercicio:</strong> ¿Cómo podrías mostrar en color lo que estás buscando? Explora la ayuda de <code>grep</code>.</p>
<p>Para buscar entre directorios, usamos el comando <code>find</code>. Por ejemplo, el siguiente comando nos encontrará todo lo que este en directorio actual</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb121-1"><a href="shell.html#cb121-1" tabindex="-1"></a><span class="ex">$</span> find .</span></code></pre></div>
<p>La opción <code>-type d</code> nos mostrará solo carpetas.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb122-1"><a href="shell.html#cb122-1" tabindex="-1"></a><span class="ex">$</span> find <span class="at">-type</span> <span class="at">-d</span></span></code></pre></div>
<p>Y con la opción <code>-type f</code> nos mostrará todos los archivos.</p>
<p>Si queremos encontrar algo que concuerde con algún nombre:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb123-1"><a href="shell.html#cb123-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="pp">*</span>.csv</span></code></pre></div>
<p>Hay que tener cuidado con esta instrucción, <code>find</code> expande los comodines antes de correr los comandos, en el caso de tener más de un archivo veremos un mensaje de error. Para prevenir esto y que si busque todos los archivos, debemos encerrar el patrón entre comillas.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb124-1"><a href="shell.html#cb124-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="st">"*.txt"</span></span></code></pre></div>
<p>Podemos hacer tuberías también con este comando, por ejemplo si quisieramos contar cuantas líneas tienen todos los archivos con terminación <code>txt</code>, podríamos hacer lo siguiente:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb125-1"><a href="shell.html#cb125-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.txt"</span><span class="va">)</span></span></code></pre></div>
<p>Otro ejemplo:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb126-1"><a href="shell.html#cb126-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"searching"</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.txt"</span><span class="va">)</span></span></code></pre></div>
<p><strong>Ejercicio:</strong> La opción <code>-v</code> en <code>grep</code> busca todo lo que no concuerde con el patrón indicado. En la carpeta <code>creatures</code>, ¿cómo listarías todos los archivos que terminen en <code>.dat</code> menos el que se llama <code>unicorn</code>?</p>
</div>
<div id="if-while-y-for" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> if, while y for<a class="anchor" aria-label="anchor" href="#if-while-y-for"><i class="fas fa-link"></i></a>
</h2>
<p>Ya vimos que la sintaxis del ciclo for es como sigue:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb127-1"><a href="shell.html#cb127-1" tabindex="-1"></a><span class="ex">$</span> for file in list</span>
<span id="cb127-2"><a href="shell.html#cb127-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb127-3"><a href="shell.html#cb127-3" tabindex="-1"></a><span class="op">&gt;</span>     comands</span>
<span id="cb127-4"><a href="shell.html#cb127-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Una forma de crear una lista es como sigue:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb128-1"><a href="shell.html#cb128-1" tabindex="-1"></a><span class="ex">$</span> {start..stop..increment}</span></code></pre></div>
<p>Usando esta sintaxis, el código para listar todos los números del uno al 9 quedaría:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb129-1"><a href="shell.html#cb129-1" tabindex="-1"></a><span class="ex">$</span> for numero in <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">9</span><span class="dt">..</span><span class="dv">1</span><span class="dt">}</span></span>
<span id="cb129-2"><a href="shell.html#cb129-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb129-3"><a href="shell.html#cb129-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$numero</span></span>
<span id="cb129-4"><a href="shell.html#cb129-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Otra forma de escribir la lista sería con la sintaxis <code>((x=1;x&lt;=9;x+=1))</code>.</p>
<p>La estructura del ciclo <code>if</code> es como sigue:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb130-1"><a href="shell.html#cb130-1" tabindex="-1"></a><span class="ex">$</span> if [ condicion ]<span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb130-2"><a href="shell.html#cb130-2" tabindex="-1"></a><span class="op">&gt;</span>     code</span>
<span id="cb130-3"><a href="shell.html#cb130-3" tabindex="-1"></a><span class="op">&gt;</span> else</span>
<span id="cb130-4"><a href="shell.html#cb130-4" tabindex="-1"></a><span class="op">&gt;</span>     other <span class="ex">code</span></span>
<span id="cb130-5"><a href="shell.html#cb130-5" tabindex="-1"></a><span class="op">&gt;</span> fi</span></code></pre></div>
<p>También se puede usar la estructura <code>((condicion))</code>.</p>
<p>Los operadores aritméticos en el condicional <code>if</code> que se pueden usar son los siguientes:</p>
<ul>
<li><p><span class="math inline">\(&gt;\)</span>, <span class="math inline">\(&lt;\)</span>, <span class="math inline">\(==\)</span>, <span class="math inline">\(!=\)</span></p></li>
<li><p><code>-eq</code>, <code>-ne</code>: igual y no igual a (equal to, not equal to).</p></li>
<li><p><code>-lt</code>, <code>-le</code>: para menor que o menor o igual que (less than,less than or equal to).</p></li>
<li><p><code>-gt</code>, <code>-ge</code>: para mayor que o mayor o igual que (greater than, greater than or equal to).</p></li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb131-1"><a href="shell.html#cb131-1" tabindex="-1"></a><span class="ex">$</span> x=10</span>
<span id="cb131-2"><a href="shell.html#cb131-2" tabindex="-1"></a><span class="ex">$</span> if [ <span class="va">$x</span> <span class="at">-gt</span> 5 ]<span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb131-3"><a href="shell.html#cb131-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"</span><span class="va">$x</span><span class="st"> es mayor que 5"</span></span>
<span id="cb131-4"><a href="shell.html#cb131-4" tabindex="-1"></a><span class="op">&gt;</span> fi</span></code></pre></div>
<p>Otros banderas para los condicionales las pueden encontrar en el siguiente <a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html">link</a>.</p>
<p>La notación <code>&amp;&amp;</code> es para un <strong>Y</strong> y la notación <code>||</code> para un <strong>O</strong>, las cuales nos sirven para verificar más de una condición:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb132-1"><a href="shell.html#cb132-1" tabindex="-1"></a><span class="ex">$</span> x=8</span>
<span id="cb132-2"><a href="shell.html#cb132-2" tabindex="-1"></a><span class="ex">$</span> if [ <span class="va">$x</span> <span class="at">-gt</span> 5 ] <span class="kw">&amp;&amp;</span> <span class="bu">[</span> <span class="va">$x</span> <span class="ot">-lt</span> 10]<span class="er">;</span> <span class="er">then</span></span>
<span id="cb132-3"><a href="shell.html#cb132-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"</span><span class="va">$x</span><span class="st"> es mayor que 5 y menor que 10"</span></span>
<span id="cb132-4"><a href="shell.html#cb132-4" tabindex="-1"></a><span class="op">&gt;</span> fi</span></code></pre></div>
<p>También podemos usar la siguiente estructura: <code>[[ $x -gt 5 &amp;&amp; $x -lt 10]]</code>.</p>
<p>Dentro de un <code>if</code> podemos pedir que nos busque en algún archivo combinandolo con <code>grep</code>, dentro de la carpeta animal-count:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb133-1"><a href="shell.html#cb133-1" tabindex="-1"></a><span class="ex">$</span> if grep <span class="at">-q</span> <span class="st">"rabbit"</span> animals.csv<span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb133-2"><a href="shell.html#cb133-2" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"Rabbit esta en el archivo"</span></span>
<span id="cb133-3"><a href="shell.html#cb133-3" tabindex="-1"></a><span class="op">&gt;</span> fi</span></code></pre></div>
<p>El mismo resultado lo podemos obtener como sigue:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb134-1"><a href="shell.html#cb134-1" tabindex="-1"></a><span class="ex">$</span> if <span class="va">$(</span><span class="fu">grep</span> <span class="at">-q</span> <span class="st">"rabbit"</span> animals.csv<span class="va">)</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb134-2"><a href="shell.html#cb134-2" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"rabbit esta en el archivo"</span></span>
<span id="cb134-3"><a href="shell.html#cb134-3" tabindex="-1"></a><span class="op">&gt;</span> fi</span></code></pre></div>
<p>El ciclo <code>while</code> tiene la misma estructura del ciclo <code>for</code> y los operadores aritméticos son los mismos que en el <code>if</code>. Siempre recuerden poner un fin al ciclo para que no sea infinito.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb135-1"><a href="shell.html#cb135-1" tabindex="-1"></a><span class="ex">$</span> x=1</span>
<span id="cb135-2"><a href="shell.html#cb135-2" tabindex="-1"></a><span class="ex">$</span> while [ <span class="va">$x</span> <span class="at">-le</span> 5 ]<span class="kw">;</span></span>
<span id="cb135-3"><a href="shell.html#cb135-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb135-4"><a href="shell.html#cb135-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$x</span></span>
<span id="cb135-5"><a href="shell.html#cb135-5" tabindex="-1"></a><span class="op">&gt;</span>     <span class="kw">((</span><span class="va">x</span><span class="op">+=</span><span class="dv">1</span><span class="kw">))</span></span>
<span id="cb135-6"><a href="shell.html#cb135-6" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre></div>
<p>Aparte de estos ciclos, existen los <strong>CASE Statements</strong>, los cuales pueden llegar a ser más útiles que los <code>if</code> cuando se tienen condiciones muy complicadas. Su estructura es la siguiente:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb136-1"><a href="shell.html#cb136-1" tabindex="-1"></a><span class="ex">$</span> case <span class="st">'String'</span> in</span>
<span id="cb136-2"><a href="shell.html#cb136-2" tabindex="-1"></a><span class="op">&gt;</span>     patron1<span class="er">)</span></span>
<span id="cb136-3"><a href="shell.html#cb136-3" tabindex="-1"></a><span class="op">&gt;</span>     comando1<span class="kw">;;</span></span>
<span id="cb136-4"><a href="shell.html#cb136-4" tabindex="-1"></a><span class="op">&gt;</span>     patron2<span class="er">)</span></span>
<span id="cb136-5"><a href="shell.html#cb136-5" tabindex="-1"></a><span class="op">&gt;</span>     comando2<span class="kw">;;</span></span>
<span id="cb136-6"><a href="shell.html#cb136-6" tabindex="-1"></a><span class="op">&gt;</span>     <span class="ex">*</span><span class="er">)</span></span>
<span id="cb136-7"><a href="shell.html#cb136-7" tabindex="-1"></a><span class="op">&gt;</span>     comando <span class="ex">por</span> default<span class="kw">;;</span></span>
<span id="cb136-8"><a href="shell.html#cb136-8" tabindex="-1"></a><span class="op">&gt;</span> esac</span></code></pre></div>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb137-1"><a href="shell.html#cb137-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb137-2"><a href="shell.html#cb137-2" tabindex="-1"></a><span class="co">#Control de flujo: case</span></span>
<span id="cb137-3"><a href="shell.html#cb137-3" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Escribe una frase"</span></span>
<span id="cb137-4"><a href="shell.html#cb137-4" tabindex="-1"></a><span class="bu">read</span> <span class="va">frase</span></span>
<span id="cb137-5"><a href="shell.html#cb137-5" tabindex="-1"></a><span class="cf">case</span> <span class="va">$frase</span> <span class="kw">in</span></span>
<span id="cb137-6"><a href="shell.html#cb137-6" tabindex="-1"></a>  <span class="ss">a</span><span class="pp">*</span><span class="kw">)</span></span>
<span id="cb137-7"><a href="shell.html#cb137-7" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"La frase empieza con a"</span></span>
<span id="cb137-8"><a href="shell.html#cb137-8" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb137-9"><a href="shell.html#cb137-9" tabindex="-1"></a>  <span class="ss">c</span><span class="pp">*</span><span class="ss">t</span><span class="kw">)</span></span>
<span id="cb137-10"><a href="shell.html#cb137-10" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"La frase empieza con c y termina con t"</span></span>
<span id="cb137-11"><a href="shell.html#cb137-11" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb137-12"><a href="shell.html#cb137-12" tabindex="-1"></a>  <span class="pp">*</span><span class="ss">com</span><span class="kw">)</span></span>
<span id="cb137-13"><a href="shell.html#cb137-13" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"La frase termina con la cadena com"</span></span>
<span id="cb137-14"><a href="shell.html#cb137-14" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb137-15"><a href="shell.html#cb137-15" tabindex="-1"></a>  <span class="pp">*</span><span class="kw">)</span></span>
<span id="cb137-16"><a href="shell.html#cb137-16" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"La frase no cumple con ninguna de las condiciones"</span></span>
<span id="cb137-17"><a href="shell.html#cb137-17" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb137-18"><a href="shell.html#cb137-18" tabindex="-1"></a><span class="cf">esac</span></span></code></pre></div>
<p>Si corremos este script en la terminal con <code>bash case_ejemplo.sh</code> veremos que dependiendo de la frase que coloquemos en la terminal, nos arrojará una de las opciones.</p>
<p><strong>Ejercicio:</strong> Crea un case statement para adivinar tu edad. Debes pedirle al usuario que introduzca el número correspondiente a tu edad y que los casos o patrones obtengan por resultado una frase referente a si adivinaron o no su edad. Realiza lo mismo con un <code>if</code>.</p>
</div>
<div id="descarga-y-limpieza-de-bases-de-datos" class="section level2" number="2.8">
<h2>
<span class="header-section-number">2.8</span> Descarga y limpieza de bases de datos<a class="anchor" aria-label="anchor" href="#descarga-y-limpieza-de-bases-de-datos"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Pendiente</strong>: Se verá después de SQL.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html"><span class="header-section-number">1</span> Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos</a></div>
<div class="next"><a href="git-y-github.html"><span class="header-section-number">3</span> Git y Github</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#shell"><span class="header-section-number">2</span> Shell</a></li>
<li><a class="nav-link" href="#navegar-en-archivos-y-directorios"><span class="header-section-number">2.1</span> Navegar en archivos y directorios</a></li>
<li><a class="nav-link" href="#manipulaci%C3%B3n-de-archivos-y-directorios"><span class="header-section-number">2.2</span> Manipulación de archivos y directorios</a></li>
<li>
<a class="nav-link" href="#tuber%C3%ADas-y-filtros"><span class="header-section-number">2.3</span> Tuberías y filtros</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#tuber%C3%ADas"><span class="header-section-number">2.3.1</span> Tuberías</a></li></ul>
</li>
<li><a class="nav-link" href="#ciclos"><span class="header-section-number">2.4</span> Ciclos</a></li>
<li><a class="nav-link" href="#scripts"><span class="header-section-number">2.5</span> Scripts</a></li>
<li><a class="nav-link" href="#buscando-y-encontrando-cosas"><span class="header-section-number">2.6</span> Buscando y encontrando cosas</a></li>
<li><a class="nav-link" href="#if-while-y-for"><span class="header-section-number">2.7</span> if, while y for</a></li>
<li><a class="nav-link" href="#descarga-y-limpieza-de-bases-de-datos"><span class="header-section-number">2.8</span> Descarga y limpieza de bases de datos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Temas Selectos de Análisis Numérico y Computación Científica: Computo científico para el análisis de datos</strong>" was written by Haydeé Peruyero. It was last built on 2024-03-01.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
